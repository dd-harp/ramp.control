<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>IRS • ramp.control</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="IRS">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">


    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">ramp.control</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">1.0.0-1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles

    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/Bed_Nets.html">Bed Nets</a>
    </li>
    <li>
      <a href="../articles/vc_lemenach.html">Vector Control Example</a>
    </li>
    <li>
      <a href="../articles/IRS.html">IRS</a>
    </li>
  </ul>
</li>
<li>
  <a href="../reference/index.html">Functions</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/dd-harp/ramp.xds/" class="external-link">
    <span class="fa fa-github"></span>

  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->



      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>IRS</h1>
            <h3 data-toc-skip class="subtitle">Building Indoor Residual
Spraying Models</h3>
            
      

      <div class="hidden name"><code>IRS.Rmd</code></div>

    </div>

    
    
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dd-harp.github.io/ramp.xds/">ramp.xds</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">ramp.control</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#devtools::load_all()</span></span></code></pre></div>
<p><strong><code>ramp.control</code></strong> handles IRS in a flexible
way. Four methods are defined; not all of them need to get used.</p>
<hr>
<p>The <code>irs</code> model object</p>
<p><code>irs</code></p>
<ul>
<li><p><code>$spray_mod</code></p></li>
<li><p><code>$effects_mod</code></p></li>
<li><p><code>$coverage_mod</code></p></li>
<li><p><strong>coverage</strong></p></li>
<li>
<p><code>$ef_sz_mod</code></p>
<ul>
<li><p>[[1]] - for species 1</p></li>
<li><p>…</p></li>
</ul>
</li>
</ul>
<hr>
<p>For the <strong><code>xds</code></strong> model object called
<code>model</code>:</p>
<ul>
<li>
<p><code>VectorControl::IRS</code></p>
<ul>
<li><p><code>SprayHouses</code> – a function to model mass distribution
of nets and/or coverage dispatched by
<code>class(model$irs$spray_mod)</code></p></li>
<li><p><code>IRSEffects</code> – modify mosquito behavioral parameters,
including search weights dispatched by
<code>class(model$irs$effects_mod)</code></p></li>
</ul>
</li>
<li>
<p><code>VectorControl::IRSEffectSizes</code></p>
<ul>
<li><p><code>IRSCoverage</code> – compute IRS coverage dispatched by
<code>class(model$irs$coverage_mod)</code></p></li>
<li><p>After evaluating <code>IRSCoverage</code>, values are stored at
<code>model$irs$coverage</code></p></li>
<li><p><code>IRSEffectSizes</code> – compute IRS effect sizes dispatched
by <code>class(model$irs$ef_sz_mod[[s]])</code> (for the
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msup><mi>s</mi><mrow><mi>t</mi><mi>h</mi></mrow></msup><annotation encoding="application/x-tex">s^{th}</annotation></semantics></math>
species)</p></li>
</ul>
</li>
</ul>
<div class="section level2">
<h2 id="coverage">Coverage<a class="anchor" aria-label="anchor" href="#coverage"></a>
</h2>
<p>IRS is usually done through a malaria program, so a large number of
houses are sprayed in a short period of time. One measure of coverage is
the fraction of houses sprayed,
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>C</mi><annotation encoding="application/x-tex">C</annotation></semantics></math>,
but since the potency of the insecticide wanes over time, we define
<em>coverage</em> as the product of the fraction of houses sprayed and
potency,
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>P</mi><mrow><mo stretchy="true" form="prefix">(</mo><mi>t</mi><mo stretchy="true" form="postfix">)</mo></mrow></mrow><annotation encoding="application/x-tex">P(t)</annotation></semantics></math>.
It is an operational measure that we can define without thinking much
about mosquito behaviors. Coverage is thus independent of mosquito
species.</p>
<p>To model coverage, we developed the <code>sharkfin</code> functions
in <strong><code>ramp.xds</code></strong>, the product of two sigmoidal
functions – one ramping up and the other down with different shapes.
With this sharkfin function, coverage increases over 20 days from zero
up to 90%, reaching 50% of the maximum on day 50. Potency wanes,
reaching 50% on day 230, 180 days after the spray round.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">irs_par</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dd-harp.github.io/ramp.xds/reference/makepar_F_sharkfin.html">makepar_F_sharkfin</a></span><span class="op">(</span>D<span class="op">=</span><span class="fl">50</span>, uk<span class="op">=</span><span class="fl">1</span><span class="op">/</span><span class="fl">3</span>, L<span class="op">=</span><span class="fl">180</span>, mx<span class="op">=</span><span class="fl">.9</span><span class="op">)</span></span>
<span><span class="va">Fsf</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dd-harp.github.io/ramp.xds/reference/make_function.html">make_function</a></span><span class="op">(</span><span class="va">irs_par</span><span class="op">)</span> </span></code></pre></div>
<p><img src="IRS_files/figure-html/unnamed-chunk-4-1.png" width="576"></p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">model</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dd-harp.github.io/ramp.xds/reference/xds_setup.html">xds_setup</a></span><span class="op">(</span>MYname <span class="op">=</span> <span class="st">"SI"</span>, Loptions <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>Lambda<span class="op">=</span><span class="fl">40</span>, season_par<span class="op">=</span><span class="fu"><a href="https://dd-harp.github.io/ramp.xds/reference/makepar_F_sin.html">makepar_F_sin</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">model</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dd-harp.github.io/ramp.xds/reference/xds_solve.html">xds_solve</a></span><span class="op">(</span><span class="va">model</span>, <span class="fl">2000</span><span class="op">)</span></span>
<span><span class="va">model</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dd-harp.github.io/ramp.xds/reference/last_to_inits.html">last_to_inits</a></span><span class="op">(</span><span class="va">model</span><span class="op">)</span></span>
<span><span class="va">model</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dd-harp.github.io/ramp.xds/reference/xds_solve.html">xds_solve</a></span><span class="op">(</span><span class="va">model</span>, <span class="fl">1100</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://dd-harp.github.io/ramp.xds/reference/xds_plot_EIR.html">xds_plot_EIR</a></span><span class="op">(</span><span class="va">model</span><span class="op">)</span></span></code></pre></div>
<p><img src="IRS_files/figure-html/unnamed-chunk-5-1.png" width="700"></p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">model</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/setup_irs.html">setup_irs</a></span><span class="op">(</span><span class="va">model</span>, coverage_name <span class="op">=</span> <span class="st">"func"</span>, coverage_opts<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>trend_par <span class="op">=</span> <span class="va">irs_par</span>, mx<span class="op">=</span><span class="fl">1</span><span class="op">)</span>, effect_sizes_name <span class="op">=</span> <span class="st">"simple"</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/show_irs_coverage.html">show_irs_coverage</a></span><span class="op">(</span><span class="va">tt</span>, <span class="va">model</span><span class="op">)</span></span></code></pre></div>
<p><img src="IRS_files/figure-html/unnamed-chunk-7-1.png" width="700"></p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">model</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dd-harp.github.io/ramp.xds/reference/xds_solve.html">xds_solve</a></span><span class="op">(</span><span class="va">model</span>, <span class="fl">1100</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://dd-harp.github.io/ramp.xds/reference/xds_plot_EIR.html">xds_plot_EIR</a></span><span class="op">(</span><span class="va">model</span><span class="op">)</span></span></code></pre></div>
<p><img src="IRS_files/figure-html/unnamed-chunk-8-1.png" width="700"></p>
</div>
<div class="section level2">
<h2 id="effect-sizes">Effect Sizes<a class="anchor" aria-label="anchor" href="#effect-sizes"></a>
</h2>
<p>The effects of IRS and effect sizes are related to <em>realized
coverage</em>,
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>ϕ</mi><annotation encoding="application/x-tex">\phi</annotation></semantics></math>:
to have an effect, the mosquito must come into contact with the IRS, and
the behaviors of different mosquito species affect how often they will
rest on a sprayed surface. We call this contact parameter
<code>zap.</code> Realized coverage is the product of coverage and the
contact parameter.</p>
<p>Models for effect sizes translate <em>realized coverage</em> into
changes in the values of mosquito bionomic parameters. In a simple
model, called <code>simple</code>, mortality changes from baseline
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>g</mi><annotation encoding="application/x-tex">g</annotation></semantics></math>
assuming that there is addtional mortality every time a mosquito blood
feeds on a human and makes contact with a sprayed surface:</p>
<p><math display="block" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>g</mi><mo>→</mo><mi>g</mi><mo>+</mo><mi>f</mi><mi>q</mi><mi>ϕ</mi></mrow><annotation encoding="application/x-tex"> g \rightarrow g + f q \phi</annotation></semantics></math></p>
<p>The effect sizes is the ratio of the modified mortality rate over
baseline:</p>
<p><math display="block" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mfrac><mrow><mi>g</mi><mo>+</mo><mi>f</mi><mi>q</mi><mi>ϕ</mi></mrow><mi>g</mi></mfrac><mo>=</mo><mn>1</mn><mo>+</mo><mi>ϕ</mi><mfrac><mrow><mi>f</mi><mi>q</mi></mrow><mi>g</mi></mfrac><mi>.</mi></mrow><annotation encoding="application/x-tex"> \frac{g + fq\phi}{g} = 1 + \phi \frac{fq}{g}.</annotation></semantics></math>
The effect size is computed relative to a baseline bionomic parameter
set, and it is returned by models for <em>independent</em> effect sizes.
The effect size is returned, rather than the modified parameters, in
case multiple modes of control are operating. Later, the baseline is
modified by control by taking the product of the baseline and all the
independent effect sizes.</p>
</div>
<div class="section level2">
<h2 id="multiple-spray-rounds">Multiple Spray Rounds<a class="anchor" aria-label="anchor" href="#multiple-spray-rounds"></a>
</h2>
<p>We want to be able to simulate multiple spray rounds, possibly with
different <code>zap</code> parameters for the different
insecticides:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">round1</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/make_irs_round.html">make_irs_round</a></span><span class="op">(</span><span class="st">"actellic"</span>, <span class="fl">50</span>, <span class="fl">.95</span>, <span class="fl">1</span><span class="op">)</span></span>
<span><span class="va">round2</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/make_irs_round.html">make_irs_round</a></span><span class="op">(</span><span class="st">"sumishield"</span>, <span class="fl">415</span>, <span class="fl">.95</span><span class="op">)</span></span>
<span><span class="va">F1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dd-harp.github.io/ramp.xds/reference/make_function.html">make_function</a></span><span class="op">(</span><span class="va">round1</span><span class="op">)</span></span>
<span><span class="va">F2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dd-harp.github.io/ramp.xds/reference/make_function.html">make_function</a></span><span class="op">(</span><span class="va">round2</span><span class="op">)</span></span>
<span><span class="va">tt</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">1095</span>, by<span class="op">=</span><span class="fl">5</span><span class="op">)</span> </span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">tt</span>, <span class="fl">1</span><span class="op">-</span><span class="op">(</span><span class="fl">1</span><span class="op">-</span><span class="fu">F1</span><span class="op">(</span><span class="va">tt</span><span class="op">)</span><span class="op">)</span><span class="op">*</span><span class="op">(</span><span class="fl">1</span><span class="op">-</span><span class="fu">F2</span><span class="op">(</span><span class="va">tt</span><span class="op">)</span><span class="op">)</span>, type <span class="op">=</span> <span class="st">"l"</span>, main<span class="op">=</span><span class="st">"Coverage"</span>, ylab <span class="op">=</span> <span class="st">"A Sharkfin Function"</span>, xlab <span class="op">=</span> <span class="st">"Time"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/lines.html" class="external-link">lines</a></span><span class="op">(</span><span class="va">tt</span>, <span class="fu">F1</span><span class="op">(</span><span class="va">tt</span><span class="op">)</span>, col <span class="op">=</span> <span class="st">"darkred"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/lines.html" class="external-link">lines</a></span><span class="op">(</span><span class="va">tt</span>, <span class="fu">F2</span><span class="op">(</span><span class="va">tt</span><span class="op">)</span>, col <span class="op">=</span> <span class="st">"darkblue"</span><span class="op">)</span></span></code></pre></div>
<p><img src="IRS_files/figure-html/unnamed-chunk-9-1.png" width="576"></p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">test_irs</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>t_init <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">60</span>, <span class="fl">240</span>, <span class="fl">420</span>, <span class="fl">785</span><span class="op">)</span><span class="op">+</span><span class="fl">730</span>,</span>
<span>type <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"bendiocarb"</span>, <span class="st">"bendiocarb"</span>, <span class="st">"actellic"</span>, <span class="st">"sumishield"</span><span class="op">)</span>,</span>
<span>coverage <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">.9</span>, <span class="fl">.85</span>, <span class="fl">.9</span>, <span class="fl">.9</span><span class="op">)</span>,</span>
<span>zap <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">.95</span>, <span class="fl">.8</span>, <span class="fl">0.8</span>, <span class="fl">.4</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">m1</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/make_irs_round.html">make_irs_round</a></span><span class="op">(</span><span class="st">"actellic"</span>, <span class="fl">500</span>, <span class="fl">.9</span><span class="op">)</span></span>
<span><span class="va">Fm1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dd-harp.github.io/ramp.xds/reference/make_function.html">make_function</a></span><span class="op">(</span><span class="va">m1</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">tt</span>, <span class="fu">Fm1</span><span class="op">(</span><span class="va">tt</span><span class="op">)</span>, type <span class="op">=</span> <span class="st">"l"</span><span class="op">)</span></span></code></pre></div>
<p><img src="IRS_files/figure-html/unnamed-chunk-11-1.png" width="700"></p>
<p>Now, we pass these to <code>setup_irs_multiround</code></p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">nullit</span> <span class="op">=</span> <span class="fu"><a href="../reference/make_irs_multiround.html">make_irs_multiround</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="va">Fn</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dd-harp.github.io/ramp.xds/reference/make_function.html">make_function</a></span><span class="op">(</span><span class="va">nullit</span><span class="op">$</span><span class="va">rounds_par</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">Fn</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">5</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## [1] 0 0 0 0 0</span></span></code></pre>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">multi4</span> <span class="op">=</span> <span class="fu"><a href="../reference/make_irs_multiround.html">make_irs_multiround</a></span><span class="op">(</span>options <span class="op">=</span> <span class="va">test_irs</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">F4r</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dd-harp.github.io/ramp.xds/reference/make_function.html">make_function</a></span><span class="op">(</span><span class="va">multi4</span><span class="op">$</span><span class="va">rounds_par</span><span class="op">)</span></span></code></pre></div>
<p><img src="IRS_files/figure-html/unnamed-chunk-15-1.png" width="576"></p>
</div>
<div class="section level2">
<h2 id="adding-irs-to-a-model">Adding IRS to a Model<a class="anchor" aria-label="anchor" href="#adding-irs-to-a-model"></a>
</h2>
<p>We are now to the point where we can add IRS.</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">tt0</span> <span class="op">&lt;-</span>  <span class="fl">365</span><span class="op">*</span><span class="op">(</span><span class="fl">0</span><span class="op">:</span><span class="fl">10</span><span class="op">)</span></span>
<span><span class="va">yy0</span> <span class="op">&lt;-</span>  <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">.7</span>, <span class="fl">2</span>, <span class="fl">1.4</span>, <span class="fl">1.8</span>, <span class="fl">0.6</span>, <span class="fl">.8</span>, <span class="fl">1.1</span>, <span class="fl">2</span>, <span class="fl">1</span>, <span class="fl">.5</span>, <span class="fl">.5</span><span class="op">)</span></span>
<span><span class="va">Lo</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>  Lambda <span class="op">=</span> <span class="fl">50</span>,</span>
<span>  season_par <span class="op">=</span> <span class="fu"><a href="https://dd-harp.github.io/ramp.xds/reference/makepar_F_sin.html">makepar_F_sin</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  trend_par <span class="op">=</span> <span class="fu"><a href="https://dd-harp.github.io/ramp.xds/reference/makepar_F_spline.html">makepar_F_spline</a></span><span class="op">(</span>tt<span class="op">=</span><span class="va">tt0</span>, yy<span class="op">=</span><span class="va">yy0</span><span class="op">)</span> </span>
<span><span class="op">)</span></span>
<span><span class="va">mod</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dd-harp.github.io/ramp.xds/reference/xds_setup.html">xds_setup</a></span><span class="op">(</span>Loptions<span class="op">=</span><span class="va">Lo</span>, MYname <span class="op">=</span> <span class="st">"SI"</span><span class="op">)</span></span>
<span><span class="va">mod</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dd-harp.github.io/ramp.xds/reference/xds_solve.html">xds_solve</a></span><span class="op">(</span><span class="va">mod</span><span class="op">)</span></span>
<span><span class="va">mod</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dd-harp.github.io/ramp.xds/reference/last_to_inits.html">last_to_inits</a></span><span class="op">(</span><span class="va">mod</span><span class="op">)</span> </span>
<span><span class="va">mod</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dd-harp.github.io/ramp.xds/reference/xds_solve.html">xds_solve</a></span><span class="op">(</span><span class="va">mod</span>, <span class="fl">10</span><span class="op">*</span><span class="fl">365</span>, <span class="fl">10</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://dd-harp.github.io/ramp.xds/reference/xds_plot_PR.html">xds_plot_PR</a></span><span class="op">(</span><span class="va">mod</span><span class="op">)</span></span></code></pre></div>
<p><img src="IRS_files/figure-html/unnamed-chunk-16-1.png" width="700"></p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">mod_irs</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/setup_irs.html">setup_irs</a></span><span class="op">(</span><span class="va">mod</span>, effect_sizes_name <span class="op">=</span> <span class="st">"simple"</span>, coverage_name <span class="op">=</span> <span class="st">"multiround"</span>, coverage_opts <span class="op">=</span> <span class="va">test_irs</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/show_irs_coverage.html">show_irs_coverage</a></span><span class="op">(</span><span class="va">tt</span>, <span class="va">mod_irs</span><span class="op">)</span></span></code></pre></div>
<p><img src="IRS_files/figure-html/unnamed-chunk-18-1.png" width="700"></p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">mod_irs</span><span class="op">$</span><span class="va">irs_obj</span><span class="op">$</span><span class="va">cover_obj</span><span class="op">$</span><span class="va">coverage</span><span class="op">[</span><span class="fl">2</span><span class="op">]</span> <span class="op">=</span> <span class="fl">0.3</span></span>
<span><span class="va">mod_irs</span><span class="op">$</span><span class="va">irs_obj</span><span class="op">$</span><span class="va">cover_obj</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/setup_F_cover_irs.html">setup_F_cover_irs</a></span><span class="op">(</span><span class="va">mod_irs</span><span class="op">$</span><span class="va">irs</span><span class="op">$</span><span class="va">coverage_mod</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/show_irs_coverage.html">show_irs_coverage</a></span><span class="op">(</span><span class="va">tt</span>, <span class="va">mod_irs</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">mod_irs</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dd-harp.github.io/ramp.xds/reference/xds_solve.html">xds_solve</a></span><span class="op">(</span><span class="va">mod_irs</span>, Tmax<span class="op">=</span><span class="fl">365</span><span class="op">*</span><span class="fl">8</span>, dt<span class="op">=</span><span class="fl">1</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://dd-harp.github.io/ramp.xds/reference/xds_plot_PR.html">xds_plot_PR</a></span><span class="op">(</span><span class="va">mod_irs</span>, clrs<span class="op">=</span><span class="st">"darkblue"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://dd-harp.github.io/ramp.xds/reference/xds_plot_PR.html">xds_plot_PR</a></span><span class="op">(</span><span class="va">mod</span>, add<span class="op">=</span><span class="cn">T</span><span class="op">)</span></span></code></pre></div>
<p><img src="IRS_files/figure-html/unnamed-chunk-21-1.png" width="700"></p>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">mod_irs1</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/add_irs_round.html">add_irs_round</a></span><span class="op">(</span><span class="va">mod_irs</span>, <span class="st">"bendiocarb"</span>, <span class="fl">300</span>, <span class="fl">.9</span>, <span class="fl">.9</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">mod_irs1</span><span class="op">$</span><span class="va">irs</span><span class="op">$</span><span class="va">coverage_mod</span><span class="op">$</span><span class="va">type</span></span></code></pre></div>
<pre><code><span><span class="co">## [1] "bendiocarb"</span></span></code></pre>
<div class="sourceCode" id="cb24"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">mod_irs1</span><span class="op">$</span><span class="va">irs</span><span class="op">$</span><span class="va">coverage_mod</span><span class="op">$</span><span class="va">t_init</span></span></code></pre></div>
<pre><code><span><span class="co">## [1] 300</span></span></code></pre>
<div class="sourceCode" id="cb26"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">mod_irs1</span><span class="op">$</span><span class="va">irs</span><span class="op">$</span><span class="va">coverage_mod</span><span class="op">$</span><span class="va">coverage</span></span></code></pre></div>
<pre><code><span><span class="co">## [1] 0.9</span></span></code></pre>
<div class="sourceCode" id="cb28"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">mod_irs1</span><span class="op">$</span><span class="va">irs</span><span class="op">$</span><span class="va">coverage_mod</span><span class="op">$</span><span class="va">zap</span></span></code></pre></div>
<pre><code><span><span class="co">## [1] 0.9</span></span></code></pre>
<div class="sourceCode" id="cb30"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">mod_irs1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dd-harp.github.io/ramp.xds/reference/xds_solve.html">xds_solve</a></span><span class="op">(</span><span class="va">mod_irs1</span>, <span class="fl">10</span><span class="op">*</span><span class="fl">365</span>, <span class="fl">10</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb31"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://dd-harp.github.io/ramp.xds/reference/xds_plot_PR.html">xds_plot_PR</a></span><span class="op">(</span><span class="va">mod_irs</span>, clrs<span class="op">=</span><span class="st">"darkblue"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://dd-harp.github.io/ramp.xds/reference/xds_plot_PR.html">xds_plot_PR</a></span><span class="op">(</span><span class="va">mod</span>, add<span class="op">=</span><span class="cn">T</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://dd-harp.github.io/ramp.xds/reference/xds_plot_PR.html">xds_plot_PR</a></span><span class="op">(</span><span class="va">mod_irs1</span>, clrs<span class="op">=</span> <span class="st">"darkred"</span>, add<span class="op">=</span><span class="cn">T</span><span class="op">)</span></span></code></pre></div>
<p><img src="IRS_files/figure-html/unnamed-chunk-25-1.png" width="700"></p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

      </div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by David L. Smith.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

      </footer>
</div>






  </body>
</html>
