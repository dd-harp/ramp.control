<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>IRS • ramp.control</title>
<!-- mathjax math --><script src="https://cdn.jsdelivr.net/npm/mathjax@3.2.2/es5/tex-mml-chtml.js" integrity="sha256-MASABpB4tYktI2Oitl4t+78w/lyA+D7b/s9GEP0JOGI=" crossorigin="anonymous"></script><script>
  window.MathJax = {
    chtml: {
      fontURL: "https://cdn.jsdelivr.net/npm/mathjax@3.2.2/es5/output/chtml/fonts/woff-v2"
    }
  };
</script><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="IRS">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">ramp.control</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.0.2-0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/BedNets.html">Bed Nets</a></li>
    <li><a class="dropdown-item" href="../articles/vc_lemenach.html">Vector Control Example</a></li>
    <li><a class="dropdown-item" href="../articles/IRS.html">IRS</a></li>
    <li><a class="dropdown-item" href="../articles/MassTreatment.html">Mass Treatment</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Functions</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/dd-harp/ramp.control/"><span class="fa fa-github"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>IRS</h1>
            <h3 data-toc-skip class="subtitle">Building Indoor Residual
Spraying Models</h3>
            
      
      <small class="dont-index">Source: <a href="https://github.com/dd-harp/ramp.control/blob/main/vignettes/IRS.Rmd" class="external-link"><code>vignettes/IRS.Rmd</code></a></small>
      <div class="d-none name"><code>IRS.Rmd</code></div>
    </div>

    
    
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dd-harp.github.io/ramp.xds/" class="external-link">ramp.xds</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dd-harp.github.io/ramp.control">ramp.control</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="http://www.stats.ox.ac.uk/pub/MASS4/" class="external-link">MASS</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="http://desolve.r-forge.r-project.org/" class="external-link">deSolve</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://sjmgarnier.github.io/viridisLite/" class="external-link">viridisLite</a></span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#devtools::load_all()</span></span></code></pre></div>
<p><strong><code>ramp.control</code></strong> handles IRS in a flexible
way. Four methods are defined; not all of them need to get used.</p>
<hr>
<p>The <code>irs</code> model object</p>
<p><code>irs</code></p>
<ul>
<li><p><code>$spray_mod</code></p></li>
<li><p><code>$effects_mod</code></p></li>
<li><p><code>$coverage_mod</code></p></li>
<li><p><strong>coverage</strong></p></li>
<li>
<p><code>$ef_sz_mod</code></p>
<ul>
<li><p>[[1]] - for species 1</p></li>
<li><p>…</p></li>
</ul>
</li>
</ul>
<hr>
<p>For the <strong><code>xds</code></strong> model object called
<code>model</code>:</p>
<ul>
<li>
<p><code>VectorControl::IRS</code></p>
<ul>
<li><p><code>SprayHouses</code> – a function to model mass distribution
of nets and/or coverage dispatched by
<code>class(model$irs$spray_mod)</code></p></li>
<li><p><code>IRSEffects</code> – modify mosquito behavioral parameters,
including search weights dispatched by
<code>class(model$irs$effects_mod)</code></p></li>
</ul>
</li>
<li>
<p><code>VectorControl::IRSEffectSizes</code></p>
<ul>
<li><p><code>IRSCoverage</code> – compute IRS coverage dispatched by
<code>class(model$irs$coverage_mod)</code></p></li>
<li><p>After evaluating <code>IRSCoverage</code>, values are stored at
<code>model$irs$coverage</code></p></li>
<li><p><code>IRSEffectSizes</code> – compute IRS effect sizes dispatched
by <code>class(model$irs$ef_sz_mod[[s]])</code> (for the <span class="math inline">\(s^{th}\)</span> species)</p></li>
</ul>
</li>
</ul>
<div class="section level2">
<h2 id="coverage">Coverage<a class="anchor" aria-label="anchor" href="#coverage"></a>
</h2>
<p>IRS is usually done through a malaria program, so a large number of
houses are sprayed in a short period of time. One measure of coverage is
the fraction of houses sprayed, <span class="math inline">\(C\)</span>,
but since the potency of the insecticide wanes over time, we define
<em>coverage</em> as the product of the fraction of houses sprayed and
potency, <span class="math inline">\(P(t)\)</span>. It is an operational
measure that we can define without thinking much about mosquito
behaviors. Coverage is thus independent of mosquito species.</p>
<p>To model coverage, we developed the <code>sharkfin</code> functions
in <strong><code>ramp.xds</code></strong>, the product of two sigmoidal
functions – one ramping up and the other down with different shapes.
With this sharkfin function, coverage increases over 20 days from zero
up to 90%, reaching 50% of the maximum on day 50. Potency wanes,
reaching 50% on day 230, 180 days after the spray round.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">irs_par</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dd-harp.github.io/ramp.xds/reference/makepar_F_sharkfin.html" class="external-link">makepar_F_sharkfin</a></span><span class="op">(</span>D<span class="op">=</span><span class="fl">50</span>, uk<span class="op">=</span><span class="fl">1</span><span class="op">/</span><span class="fl">3</span>, L<span class="op">=</span><span class="fl">180</span>, mx<span class="op">=</span><span class="fl">.9</span><span class="op">)</span></span>
<span><span class="va">Fsf</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dd-harp.github.io/ramp.xds/reference/make_function.html" class="external-link">make_function</a></span><span class="op">(</span><span class="va">irs_par</span><span class="op">)</span> </span></code></pre></div>
<p><img src="IRS_files/figure-html/unnamed-chunk-4-1.png" width="576"></p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">model</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dd-harp.github.io/ramp.xds/reference/xds_setup.html" class="external-link">xds_setup</a></span><span class="op">(</span>MYname <span class="op">=</span> <span class="st">"SI"</span>, Loptions <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>Lambda<span class="op">=</span><span class="fl">40</span>, season_par<span class="op">=</span><span class="fu"><a href="https://dd-harp.github.io/ramp.xds/reference/makepar_F_sin.html" class="external-link">makepar_F_sin</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">model</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dd-harp.github.io/ramp.xds/reference/xds_solve.html" class="external-link">xds_solve</a></span><span class="op">(</span><span class="va">model</span>, <span class="fl">2000</span><span class="op">)</span></span>
<span><span class="va">model</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dd-harp.github.io/ramp.xds/reference/last_to_inits.html" class="external-link">last_to_inits</a></span><span class="op">(</span><span class="va">model</span><span class="op">)</span></span>
<span><span class="va">model</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dd-harp.github.io/ramp.xds/reference/xds_solve.html" class="external-link">xds_solve</a></span><span class="op">(</span><span class="va">model</span>, <span class="fl">1100</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://dd-harp.github.io/ramp.xds/reference/xds_plot_EIR.html" class="external-link">xds_plot_EIR</a></span><span class="op">(</span><span class="va">model</span><span class="op">)</span></span></code></pre></div>
<p><img src="IRS_files/figure-html/unnamed-chunk-5-1.png" width="700"></p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">model</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/setup_irs.html">setup_irs</a></span><span class="op">(</span><span class="va">model</span>, coverage_name <span class="op">=</span> <span class="st">"func"</span>, coverage_opts<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>trend_par <span class="op">=</span> <span class="va">irs_par</span>, mx<span class="op">=</span><span class="fl">1</span><span class="op">)</span>, effect_sizes_name <span class="op">=</span> <span class="st">"simple"</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/show_irs_contact.html">show_irs_contact</a></span><span class="op">(</span><span class="va">tt</span>, <span class="va">model</span><span class="op">)</span></span></code></pre></div>
<p><img src="IRS_files/figure-html/unnamed-chunk-7-1.png" width="700"></p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">model</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dd-harp.github.io/ramp.xds/reference/xds_solve.html" class="external-link">xds_solve</a></span><span class="op">(</span><span class="va">model</span>, <span class="fl">1100</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://dd-harp.github.io/ramp.xds/reference/xds_plot_EIR.html" class="external-link">xds_plot_EIR</a></span><span class="op">(</span><span class="va">model</span><span class="op">)</span></span></code></pre></div>
<p><img src="IRS_files/figure-html/unnamed-chunk-8-1.png" width="700"></p>
</div>
<div class="section level2">
<h2 id="effect-sizes">Effect Sizes<a class="anchor" aria-label="anchor" href="#effect-sizes"></a>
</h2>
<p>The effects of IRS and effect sizes are related to <em>realized
coverage</em>, <span class="math inline">\(\phi\)</span>: to have an
effect, the mosquito must come into contact with the IRS, and the
behaviors of different mosquito species affect how often they will rest
on a sprayed surface. We call this contact parameter <code>zap.</code>
Realized coverage is the product of coverage and the contact
parameter.</p>
<p>Models for effect sizes translate <em>realized coverage</em> into
changes in the values of mosquito bionomic parameters. In a simple
model, called <code>simple</code>, mortality changes from baseline <span class="math inline">\(g\)</span> assuming that there is addtional
mortality every time a mosquito blood feeds on a human and makes contact
with a sprayed surface:</p>
<p><span class="math display">\[ g \rightarrow g + f q \phi\]</span></p>
<p>The effect sizes is the ratio of the modified mortality rate over
baseline:</p>
<p><span class="math display">\[ \frac{g + fq\phi}{g} = 1 + \phi
\frac{fq}{g}.\]</span> The effect size is computed relative to a
baseline bionomic parameter set, and it is returned by models for
<em>independent</em> effect sizes. The effect size is returned, rather
than the modified parameters, in case multiple modes of control are
operating. Later, the baseline is modified by control by taking the
product of the baseline and all the independent effect sizes.</p>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by David L. Smith.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer>
</div>





  </body>
</html>
