<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Vector Control Response Timelines â€¢ ramp.control</title>
<!-- mathjax math --><script src="https://cdn.jsdelivr.net/npm/mathjax@3.2.2/es5/tex-mml-chtml.js" integrity="sha256-MASABpB4tYktI2Oitl4t+78w/lyA+D7b/s9GEP0JOGI=" crossorigin="anonymous"></script><script>
  window.MathJax = {
    chtml: {
      fontURL: "https://cdn.jsdelivr.net/npm/mathjax@3.2.2/es5/output/chtml/fonts/woff-v2"
    }
  };
</script><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Vector Control Response Timelines">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">ramp.control</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.0.2-0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/BedNets.html">Bed Nets</a></li>
    <li><a class="dropdown-item" href="../articles/vc_lemenach.html">Vector Control Example</a></li>
    <li><a class="dropdown-item" href="../articles/IRS.html">IRS</a></li>
    <li><a class="dropdown-item" href="../articles/IRS-insectides.html">IRS - Insecticides</a></li>
    <li><a class="dropdown-item" href="../articles/MassTreatment.html">Mass Treatment</a></li>
    <li><a class="dropdown-item" href="../articles/ResponseTimelines.html">Response Timelines</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Functions</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/dd-harp/ramp.control/"><span class="fa fa-github"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Vector Control Response Timelines</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/dd-harp/ramp.control/blob/main/vignettes/ResponseTimelines.Rmd" class="external-link"><code>vignettes/ResponseTimelines.Rmd</code></a></small>
      <div class="d-none name"><code>ResponseTimelines.Rmd</code></div>
    </div>

    
    
<hr>
<p>An important role for mathematical models is to understand dynamical
responses to malaria control, or <strong>response timelines</strong>:
how would the system respond to major perturbations? This is highly
relevant for the evaluation of vector control, which is often
implemented as mass bed net distributions or mass indoor residual
spraying (IRS) events.</p>
<hr>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dd-harp.github.io/ramp.xds/" class="external-link">ramp.xds</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dd-harp.github.io/ramp.control">ramp.control</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="http://www.stats.ox.ac.uk/pub/MASS4/" class="external-link">MASS</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="http://desolve.r-forge.r-project.org/" class="external-link">deSolve</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://sjmgarnier.github.io/viridisLite/" class="external-link">viridisLite</a></span><span class="op">)</span></span></code></pre></div>
<div class="section level2">
<h2 id="perturbations">Perturbations<a class="anchor" aria-label="anchor" href="#perturbations"></a>
</h2>
<p>In his 1982 book, <em>The Biomathematics of Malaria,</em> Bailey
introduces dynamical systems describing malaria up to that point. The
chapters focus on 1) threshold criteria and epidemics in malaria-naive
populations; and 2) understanding endemic malaria. Here, we consider
<em>response timelines,</em> the dynamical responses to
perturbations.</p>
<p>In vector control, a basic notion is the concept of an <em>effect
size,</em> or a proportional change in a quantity of interest. For an
effect size to be a meaningful quantity, it must be defined around the
way vector control actually happens. In this context, and being someone
generic for now, vector control <em>coverage</em> undergoes a rapid
increase followed by a long decay. The effects of vector control change
dynamically as coverage changes. Here, we define a <em>response
timeline</em> as a set of curves describing the effects of malaria
vector control over time.</p>
<p>Vector control is often implemented through mass distribution events:
mass bed net distributions; or mass indoor residual spraying (IRS). In a
mechanistic model, the direct effect of the distribution is to modify
blood feeding and mosquito survival. In the case of bed nets, the nets
also modify exposure when they are used. Causation here involves complex
cascading chains. For bednets: access, use, mosquito contact, and
effect. For IRS, coverage, killing potential, mosquito contact and
effect.</p>
<p>SimBA was developed to handle these phenomena in several ways. Peer
reviewed mechanistic models can trace the effects of vector control on
bionomic parameters, effects on mosquito aquatic ecology. There are also
built in functions to model forcing by the EIR directly. An important
role for mathematical models is to help develop rational expectations
about the changes in the prevalence of infection in humans.</p>
</div>
<div class="section level2">
<h2 id="pr-response-timelines">PR Response Timelines<a class="anchor" aria-label="anchor" href="#pr-response-timelines"></a>
</h2>
<p>For planning purposes, the Global Malaria Eradication Programme
(GMEP) set 200 days as the expected decay in prevalence following the
complete interruption of transmission. What should we expect to see in
the wake of a mass bed net distribution program or in the wake of
IRS?</p>
<p>SimBA was developed with functions to compose and decompose time
series. A forcing function can be composed that is the product of a
mean, a seasonal pattern, a trend, and some shocks. To model the shocks,
SimBA developed <code>sharkbite</code> functions to mimic vector control
coverage and effects over time. A <code>sharkbite</code> is the product
of two sigmoidal functions with a start date, a duration, shape
parameters that set the slope, and a maximum value.</p>
<p>This function creates an effect that starts on day 500, ramps up
rapidly to a maximum of 50%, and then then declines, reaching 50% of its
maximum after 365 days.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">tt</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">5</span><span class="op">*</span><span class="fl">365</span>, by<span class="op">=</span><span class="fl">5</span><span class="op">)</span></span>
<span><span class="va">p1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dd-harp.github.io/ramp.xds/reference/makepar_F_sharkbite.html" class="external-link">makepar_F_sharkbite</a></span><span class="op">(</span><span class="fl">500</span>, <span class="fl">365</span>, dk <span class="op">=</span> <span class="fl">1</span><span class="op">/</span><span class="fl">100</span>, mx<span class="op">=</span><span class="fl">0.8</span><span class="op">)</span></span>
<span><span class="va">F1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dd-harp.github.io/ramp.xds/reference/make_function.html" class="external-link">make_function</a></span><span class="op">(</span><span class="va">p1</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">tt</span>, <span class="fu">F1</span><span class="op">(</span><span class="va">tt</span><span class="op">)</span>, type <span class="op">=</span> <span class="st">"l"</span>, xlab <span class="op">=</span> <span class="st">"Time"</span>, ylab <span class="op">=</span> <span class="st">"Effect Size"</span>, main <span class="op">=</span> <span class="st">"Response Timeline"</span>, ylim <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>,<span class="fl">1</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p><img src="ResponseTimelines_files/figure-html/unnamed-chunk-2-1.png" class="r-plt" width="672">
We can use it to modify exposure in a model, and see how malaria
prevalence responds.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/par.html" class="external-link">par</a></span><span class="op">(</span>mfrow <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2</span>,<span class="fl">1</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">sis_si_eir</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dd-harp.github.io/ramp.xds/reference/xds_setup_eir.html" class="external-link">xds_setup_eir</a></span><span class="op">(</span>Xname <span class="op">=</span> <span class="st">"SIS"</span>, shock_par <span class="op">=</span> <span class="va">p1</span>, eir<span class="op">=</span><span class="fl">3</span><span class="op">/</span><span class="fl">365</span><span class="op">)</span></span>
<span><span class="va">sis_si_eir</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dd-harp.github.io/ramp.xds/reference/burnin.html" class="external-link">burnin</a></span><span class="op">(</span><span class="va">sis_si_eir</span><span class="op">)</span> </span>
<span><span class="va">sis_si_eir</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dd-harp.github.io/ramp.xds/reference/xds_solve.html" class="external-link">xds_solve</a></span><span class="op">(</span><span class="va">sis_si_eir</span>, <span class="fl">5</span><span class="op">*</span><span class="fl">365</span>, <span class="fl">5</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://dd-harp.github.io/ramp.xds/reference/xds_plot_EIR.html" class="external-link">xds_plot_EIR</a></span><span class="op">(</span><span class="va">sis_si_eir</span><span class="op">)</span> <span class="op">-&gt;</span> <span class="va">eir</span></span>
<span><span class="fu"><a href="https://dd-harp.github.io/ramp.xds/reference/xds_plot_PR.html" class="external-link">xds_plot_PR</a></span><span class="op">(</span><span class="va">sis_si_eir</span><span class="op">)</span>  <span class="op">-&gt;</span> <span class="va">pr</span></span></code></pre></div>
<p><img src="ResponseTimelines_files/figure-html/unnamed-chunk-3-1.png" class="r-plt" width="672"></p>
<p>What we observe is a decline in <em>Pf</em>PR starting shortly after
the perturbation happens, and then a recovery to the steady state.</p>
<p>What if malaria is seasonal?</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/par.html" class="external-link">par</a></span><span class="op">(</span>mfrow <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2</span>,<span class="fl">1</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">seas0</span> <span class="op">=</span> <span class="fu"><a href="https://dd-harp.github.io/ramp.xds/reference/makepar_F_sin.html" class="external-link">makepar_F_sin</a></span><span class="op">(</span>bottom <span class="op">=</span> <span class="fl">0.3</span>, pw<span class="op">=</span><span class="fl">2</span><span class="op">)</span></span>
<span><span class="va">sis_si_eir_1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dd-harp.github.io/ramp.xds/reference/xds_setup_eir.html" class="external-link">xds_setup_eir</a></span><span class="op">(</span>Xname <span class="op">=</span> <span class="st">"SIS"</span>, season_par <span class="op">=</span> <span class="va">seas0</span>, eir<span class="op">=</span><span class="fl">3</span><span class="op">/</span><span class="fl">365</span><span class="op">)</span></span>
<span><span class="va">sis_si_eir_2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dd-harp.github.io/ramp.xds/reference/xds_setup_eir.html" class="external-link">xds_setup_eir</a></span><span class="op">(</span>Xname <span class="op">=</span> <span class="st">"SIS"</span>, season_par <span class="op">=</span> <span class="va">seas0</span>, shock_par <span class="op">=</span> <span class="va">p1</span>, eir<span class="op">=</span><span class="fl">3</span><span class="op">/</span><span class="fl">365</span><span class="op">)</span></span>
<span><span class="va">sis_si_eir_1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dd-harp.github.io/ramp.xds/reference/burnin.html" class="external-link">burnin</a></span><span class="op">(</span><span class="va">sis_si_eir_1</span><span class="op">)</span> </span>
<span><span class="va">sis_si_eir_2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dd-harp.github.io/ramp.xds/reference/burnin.html" class="external-link">burnin</a></span><span class="op">(</span><span class="va">sis_si_eir_2</span><span class="op">)</span> </span>
<span><span class="va">sis_si_eir_1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dd-harp.github.io/ramp.xds/reference/xds_solve.html" class="external-link">xds_solve</a></span><span class="op">(</span><span class="va">sis_si_eir_1</span>, <span class="fl">5</span><span class="op">*</span><span class="fl">365</span>, <span class="fl">5</span><span class="op">)</span></span>
<span><span class="va">sis_si_eir_2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dd-harp.github.io/ramp.xds/reference/xds_solve.html" class="external-link">xds_solve</a></span><span class="op">(</span><span class="va">sis_si_eir_2</span>, <span class="fl">5</span><span class="op">*</span><span class="fl">365</span>, <span class="fl">5</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://dd-harp.github.io/ramp.xds/reference/xds_plot_EIR.html" class="external-link">xds_plot_EIR</a></span><span class="op">(</span><span class="va">sis_si_eir_2</span><span class="op">)</span> <span class="op">-&gt;</span> <span class="va">eir2</span></span>
<span><span class="fu"><a href="https://dd-harp.github.io/ramp.xds/reference/get_EIR.html" class="external-link">get_EIR</a></span><span class="op">(</span><span class="va">sis_si_eir_1</span><span class="op">)</span> <span class="op">-&gt;</span> <span class="va">eir1</span></span>
<span><span class="fu"><a href="https://dd-harp.github.io/ramp.xds/reference/xds_plot_PR.html" class="external-link">xds_plot_PR</a></span><span class="op">(</span><span class="va">sis_si_eir_2</span><span class="op">)</span>  <span class="op">-&gt;</span> <span class="va">pr2</span></span></code></pre></div>
<p><img src="ResponseTimelines_files/figure-html/unnamed-chunk-4-1.png" class="r-plt" width="672"></p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://dd-harp.github.io/ramp.xds/reference/get_PR.html" class="external-link">get_PR</a></span><span class="op">(</span><span class="va">sis_si_eir_1</span><span class="op">)</span> <span class="op">-&gt;</span> <span class="va">pr1</span> </span></code></pre></div>
<p>Now, the effect is modulated by the seasonal pattern. Here we show
the effects on EIR and PR as ratios and differences.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">tt</span><span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">5</span><span class="op">*</span><span class="fl">365</span>, by <span class="op">=</span> <span class="fl">5</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/par.html" class="external-link">par</a></span><span class="op">(</span>mfcol <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2</span>,<span class="fl">2</span><span class="op">)</span>, mar <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">3</span>,<span class="fl">5</span>,<span class="fl">2</span>,<span class="fl">1</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">tt</span>, <span class="va">eir1</span><span class="op">/</span><span class="va">eir2</span>, type <span class="op">=</span> <span class="st">"l"</span>, ylab <span class="op">=</span> <span class="st">"EIR Ratios"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">tt</span>, <span class="va">eir1</span><span class="op">-</span><span class="va">eir2</span>, type <span class="op">=</span> <span class="st">"l"</span>, ylab <span class="op">=</span> <span class="st">"EIR Differences"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">tt</span>, <span class="va">pr1</span><span class="op">/</span><span class="va">pr2</span>, type <span class="op">=</span> <span class="st">"l"</span>, ylab <span class="op">=</span> <span class="st">"PR ratios"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">tt</span>, <span class="va">pr1</span><span class="op">-</span><span class="va">pr2</span>, type <span class="op">=</span> <span class="st">"l"</span>, ylab <span class="op">=</span> <span class="st">"PR differences"</span><span class="op">)</span></span></code></pre></div>
<p><img src="ResponseTimelines_files/figure-html/response%20timeline%20panel-1.png" class="r-plt" width="864"></p>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by David L. Smith.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer>
</div>





  </body>
</html>
